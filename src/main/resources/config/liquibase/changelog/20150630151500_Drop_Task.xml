<?xml version="1.0" encoding="utf-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet id="20150630151500" author="oanam">
        <dropTable tableName="T_TASK" cascadeConstraints="true" />
    </changeSet>

    <changeSet id="20150708100000" author="oanam">
        <delete tableName="T_ACCOUNT_MODULE_RIGHTS">
            <where>fk_module_right = (SELECT ID_MODULE_RIGHT from T_MODULE_RIGHT
                where FK_MODULE = (SELECT ID_MODULE from T_MODULE where CODE = 'task'))</where>
        </delete>
        <delete tableName="T_ROLE_MODULE_RIGHTS">
            <where>fk_module_right = (SELECT ID_MODULE_RIGHT from T_MODULE_RIGHT
                where FK_MODULE = (SELECT ID_MODULE from T_MODULE where CODE = 'task'))</where>
        </delete>
        <delete tableName="T_MODULE_RIGHT">
            <where>FK_MODULE = (SELECT ID_MODULE from T_MODULE where code = 'task')</where>
        </delete>
        <delete tableName="T_MENU">
            <where>module_id = (SELECT ID_MODULE from T_MODULE where code = 'task')</where>
        </delete>
        <delete tableName="T_MODULE">
            <where>code = 'task'</where>
        </delete>
    </changeSet>
</databaseChangeLog>
